{%- macro add_button(name, permission, btn_type) %}
  <button class="btn {{ btn_type }}" type="button"
   onclick='submitPermissionForm("{{ permission }}_form", {{ name }})'>{{ name|capitalize }}</button>
{%- endmacro %}
<form id="permissions" role="form" class="form-inline">
  {% for form in permissions %}
    <div id="{{ permission }}_form" data-username="{{ username }}">
      <div class="form-group">
        {{ form.permission.label(class='sr-only')|safe }}
        {{ form.permission(class='form-control')|safe }}
      </div>
      <div class="form-group">
        {{ form.options.label(class='sr-only')|safe }}
        {{ form.options(class='form-control')|safe }}
        {{ form.data_version()|safe }}
      </div>
      <div class="form-group">
        {{ add_button("update", form.permission.id, 'btn-primary') }}
        {{ add_button("delete", form.permission.id, 'btn-danger') }}
      </div>
    </div>
  {% endfor %}
</form>
